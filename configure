# -*-Makefile-*-
#!/bin/bash

set -ev

if [ "$(uname)" == "Darwin" ]; then
    STUB_LIB=libddstubs.dylib
    BIT_LIB=libddsbit.dylib
    HELLO_LIB=libddshelloworld.dylib
elif [ "$(uname -s)" == "Linux" ]; then
    STUB_LIB=libddstubs.so
    BIT_LIB=libddsbit.so
    HELLO_LIB=libddshelloworld.so
fi

cd bit
rm -Rf build
mkdir build
cd build
cmake ..
make
if [ "$(uname)" == "Darwin" ]; then
    cp ${STUB_LIB} /usr/local/lib
    cp ${BIT_LIB} /usr/local/lib
    cp ${HELLO_LIB} /usr/local/lib
elif [ "$(uname -s)" == "Linux" ]; then
    sudo cp ${STUB_LIB} /usr/local/lib
    sudo cp ${BIT_LIB} /usr/local/lib
    sudo cp ${HELLO_LIB} /usr/local/lib
fi

